{% extends "./dashboard/index.html" %}

{% block maincontent %}
<main id="main-content" role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-5 mt-3 mb-5">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="flashes mt-2" style="text-decoration: none; list-style: none; margin: 0; padding: 0">
        {% for message in messages %}
        <div class="alert alert-info dismiss">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    <div
        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h3 class="h3">All Decks</h3>
        <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group mr-2">
                <a href="{{ url_for('core.create_deck') }}">
                    <button type="button" class="btn btn-sm btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-plus">
                            <line x1="12" y1="5" x2="12" y2="19">
                            </line>
                            <line x1="5" y1="12" x2="19" y2="12">
                            </line>
                        </svg>
                        New deck
                    </button>
                </a>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <div class="row d-flex justify-content-between align-items-center flex-grow-1">

                <!-- Search filter -->
                <div class="col-sm-6 col-md-4 mb-sm-0">
                    <form>
                        <!-- Search -->
                        <div class="input-group input-group-merge input-group-flush">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="feather feather-search">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                    </svg>
                                </div>
                            </div>
                            <input id="datatableSearch" type="search" class="form-control" placeholder="Search decks">
                        </div>
                        <!-- End Search -->
                    </form>
                </div>

                <!-- Selected items count -->
                <div id="selected_count" class="col-sm-6 col-md-4 md-4 mb-sm-0">
                </div>

                <!-- Custom filters -->
                <div class="col-sm-6 col-md-4">
                    <select class="form-control select2" id="deck_name" name="deck_name">
                        <option></option>
                        <option value="Complete">Complete</option>
                        <option value="Studying">Studying</option>
                        <option value="New">New</option>
                    </select>
                </div>
            </div>
        </div>
        <table id="decksDt" class="custom-dt table border-bottom border-top w-100">
            <thead>
                <tr>
                    <th class="pr-0" style="width: 26px">
                        <div class="custom-control custom-checkbox" style="padding-right: 0!important">
                            <input type="checkbox" class="custom-control-input" id="dt-select-all" value="1">
                            <label class="custom-control-label" for="dt-select-all"></label>
                        </div>
                    </th>
                    <th class="pl-0">Name</th>
                    <th>Card Count</th>
                    <th>Status</th>
                    <th>Progress</th>
                    <th>Date Added</th>
                    <th>Action</th>
                    <th class="d-none"></th>
                </tr>
            </thead>
            <tbody>
                {% for deck in decks %}
                <tr data-id="{{deck.id}}">
                    <td class="min-tablet-p pr-0"></td>
                    <td class="pl-0">{{ deck.name }}</td>
                    <td>{{ deck.id }}</td>
                    <td>
                        {% if deck.id % 2 == 0 %}
                        <span class="bg-success mr-2"
                            style="height: .5rem; width: .5rem; border-radius: 50%; display: inline-block;">
                        </span>
                        Complete
                        {% elif deck.id %3 == 0 %}
                        <span class="bg-primary mr-2"
                            style="height: .5rem; width: .5rem; border-radius: 50%; display: inline-block;">
                        </span>
                        Studying
                        {% else %}
                        <span class="bg-secondary mr-2"
                            style="height: .5rem; width: .5rem; border-radius: 50%; display: inline-block;">
                        </span>
                        New
                        {% endif %}
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <span class="text-small mr-2">{{ deck.id }}%</span>
                            <div class="progress" style="height: 0.25rem; flex-grow: 1">
                                <div class="progress-bar" role="progressbar" style="width: {{ deck.id }}%;"
                                    aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </td>
                    <td>{{ deck.date_created }}</td>
                    <td>
                        <span class="text-danger dt-icon mr-1" onclick="deleteDeck('{{deck.id}}')"
                            data-id="{{deck.id}}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-trash-2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path
                                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                </path>
                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                <line x1="14" y1="11" x2="14" y2="17"></line>
                            </svg>
                        </span>
                        <span class="text-info dt-icon mr-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-edit">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                        </span>
                        <span class="text-success dt-icon mr-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-folder-plus">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z">
                                </path>
                                <line x1="12" y1="11" x2="12" y2="17"></line>
                                <line x1="9" y1="14" x2="15" y2="14"></line>
                            </svg>
                        </span>
                    </td>
                    <td class="d-none">{{deck.id}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</main>
{% endblock %}